@(user: model.user.User, acts : List[model.blog.Activity])

@import helper._
@import play.i18n.Messages
@import model.user.social.SocialNetwork

@implicitFieldConstructor = @{ FieldConstructor(component.bootstrapInput.render) } 
@profileExists = @{null != user.profile}

@wodsterStat = @{null}
@facebookStat = @{null}
@twitterStat = @{null}
@if(profileExists) {
	wodsterStat = user.profile.socialProfiles.get(SocialNetwork.WODSTER)
	facebookStat = user.profile.socialProfiles.get(SocialNetwork.FACEBOOK)
	twitterStat = user.profile.socialProfiles.get(SocialNetwork.TWITTER)
}

@main("") { 

	<div class="row">

        <div class="col-md-3 col-sm-5">

          <div class="profile-avatar">
            <img alt="Profile Image" class="profile-avatar-img thumbnail" src="http://placehold.it/253x253">
          </div> <!-- /.profile-avatar -->

          <div class="list-group">  

            <a class="list-group-item" href="javascript:;">
              <i class="fa fa-asterisk text-primary"></i> &nbsp;&nbsp;Activity Feed

              <i class="fa fa-chevron-right list-group-chevron"></i>
            </a> 

            <a class="list-group-item" href="javascript:;">
              <i class="fa fa-envelope text-primary"></i> &nbsp;&nbsp;Messages

              <i class="fa fa-chevron-right list-group-chevron"></i>
            </a> 

            <a class="list-group-item" href="javascript:;">
              <i class="fa fa-cog text-primary"></i> &nbsp;&nbsp;Settings

              <i class="fa fa-chevron-right list-group-chevron"></i>
            </a> 
          </div> <!-- /.list-group -->



        </div> <!-- /.col -->


		<!-- Profile -->
        <div class="col-md-6 col-sm-7">

          <h3>@user.name</h3>

          <hr>

          <p>
            <a href="@routes.UserController.settings()">
            	<button class="btn btn-primary">Edit</button>
            </a>
            &nbsp;&nbsp;
            <a href="javascript:;">
            	<button class="btn btn-secondary" >Send Message</button>
            </a>
          </p>

          <hr>
          
          <ul class="icons-list">
            <li><i class="icon-li fa fa-envelope"></i> @user.email</li>
            <li><i class="icon-li fa fa-globe"></i> @if(profileExists) {user.profile.website}</li>
            <li><i class="icon-li fa fa-map-marker"></i> @if(profileExists) {user.profile.city user.profile.country}</li>
          </ul>    

          <br>

          <p>@if(profileExists) {user.profile.about}</p>

          <hr>


          <br><br>

          <h4 class="content-title"><u>Activity Feed</u></h4>

			@form(routes.UserController.share(), 'id -> "activityForm") {
	            <div class="share-widget clearfix">
	
	              <textarea tabindex="1" name="content" placeholder="Share what you've been up to..." rows="3" class="form-control share-widget-textarea"></textarea>
	
	              <div class="share-widget-actions">
	
		              <div class="pull-right">
		                <button type="submit" tabindex="2" class="btn btn-primary btn-sm">Post</button>
		              </div>
	
	              </div> 
					
	            </div>
			}	
            <br><br>

			<div class="feed">
            	@activities(acts)
           	</div>

            <br class="visible-xs">            
            <br class="visible-xs">
            
          </div> <!-- /.col -->


          <div class="col-md-3">
            <h5 class="content-title"><u>Social Stats</u></h5>

            <div class="list-group">  

              <a class="list-group-item" href="javascript:;">
                  <h3 class="pull-right"><i class="fa fa-eye text-primary"></i></h3>
                  <h4 class="list-group-item-heading">@if(null != wodsterStat) {wodsterStat.stat} else {0}</h4>
                  <p class="list-group-item-text">Profile Views</p>                  
                </a>

              <a class="list-group-item" href="javascript:;">
                <h3 class="pull-right"><i class="fa fa-facebook-square  text-primary"></i></h3>
                <h4 class="list-group-item-heading">@if(null != facebookStat) {facebookStat.stat} else {0}</h4>
                <p class="list-group-item-text">Facebook Likes</p>
              </a>

              <a class="list-group-item" href="javascript:;">
                <h3 class="pull-right"><i class="fa fa-twitter-square  text-primary"></i></h3>
                <h4 class="list-group-item-heading">@if(null != twitterStat) {twitterStat.stat} else {0}</h4>
                <p class="list-group-item-text">Twitter Followers</p>
              </a>
            </div> <!-- /.list-group -->

            <br>

            <h5 class="content-title"><u>Project Activity</u></h5>

            <div class="well">


              <ul class="icons-list text-md">

                <li>
                  <i class="icon-li fa fa-location-arrow"></i>

                  <strong>Rod</strong> uploaded 6 files. 
                  <br>
                  <small>about 4 hours ago</small>
                </li>

                <li>
                  <i class="icon-li fa fa-location-arrow"></i>

                  <strong>Rod</strong> followed the research interest: <a href="javascript:;">Open Access Books in Linguistics</a>. 
                  <br>
                  <small>about 23 hours ago</small>
                </li>

                <li>
                  <i class="icon-li fa fa-location-arrow"></i>

                  <strong>Rod</strong> added 51 papers. 
                  <br>
                  <small>2 days ago</small>
                </li>
              </ul>

            </div> <!-- /.well -->

          </div> <!-- /.col -->

        </div>
        
        <script type="text/javascript">
	
			
			$(document).ready(function()
			{
				$("#activityForm").submit(function(e)
					{
						var form = $(this);
						var formData = form.serializeArray();
						var formURL = form.attr("action");
						$.ajax(
						{
							url : formURL,
							type: "POST",
							data : formData,
							success: function(data, textStatus, jqXHR)
							{
								form.trigger("reset");
								$(".feed").html(data);
							},
							error: function(jqXHR, textStatus, errorThrown)
							{
								// TODO
								alert('Error ' + textStatus + ' ' + errorThrown);
							}
						});
						
						// stop the form from submitting the normal way and refreshing the page
						e.preventDefault();
					});
			});
		</script>
}