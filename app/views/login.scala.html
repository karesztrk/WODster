@(formObject: Form[controllers.entity.Login])

@import helper._
@import play.i18n.Messages

@implicitFieldConstructor = @{ FieldConstructor(component.bootstrapInput.render) } 

@main("") { 
	@loginForm(formObject);
	
	<p class="text-center">
		Not a member yet? <a href="@routes.Application.signUp()">Sign up now</a>
	</p>

	<script type="text/javascript">
		$(document).ready(function()
		{
			$("#loginForm").submit(function(e)
			{
				var form = $(this);
				var formData = form.serializeArray();
				jsRoutes.controllers.Application.authenticate().ajax({
					data: formData,
			        success: function(response) {
			        	window.location.replace(jsRoutes.controllers.Application.index().url);
			        },
			        error: function(response) {
			            form.html(response.responseText);
			        }
			    });
				// stop the form from submitting the normal way and refreshing the page
				e.preventDefault();
			});
		});
	</script> 
}