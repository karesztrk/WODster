@(prForm: Form[model.journal.PersonalRecord])

@import helper._

@implicitFieldConstructor = @{ FieldConstructor(component.bootstrapInput.render) }

@main("journal") { 
    
    <div class="row">
    	<div class="col-md-6 col-md-push-3 col-sm-8 col-sm-push-2 ">
    		<div class="portlet">
			    <h2 class="portlet-title"><u>Add a new PR</u></h2>
			    <div class="portlet-body">
				    @form(routes.PersonalRecordController.save()) {
					
						@inputText(prForm("name"), 
							'_label -> "Workout", 
							'type -> "text", 
							'class -> "form-control",
							'placeholder -> "Add a name to your workout")
						
						@inputText(prForm("workout"), 
							'id -> "workout_select", 
							'_label -> null, 
							'type -> "text", 
							'class -> "form-control", 
							'_showHelp -> false, 
							Symbol("data-placeholder") -> "Select an existing workout")
						
						<div class="actions"> 
							<input type="submit" value="Save" class="btn btn-primary">
							<a href="@routes.PersonalRecordController.list()" class="btn btn-default">Cancel</a> 
						</div>
						
					}
				</div>
			</div>
		</div>
	</div>
    
    <script>
		$(document).ready(function() { 
			$("#workout_select").select2({
			    ajax: {
			        dataType: "json",
			        url: jsRoutes.controllers.WODController.fetch().url,
			        results: function (data) {
			            return {results: data};
			        }
			    },
			    formatResult: formatValues,
			    formatSelection: formatValues,
			    minimumInputLength: 3
			}); 
			
			function formatValues(data) {
			    return data.title;
			}
			
			$( "#name" ).keyup(function( event ) {
				if(this.value != null && this.value != "") {
					$("#workout_select").select2("enable", false); 
				} else {
					$("#workout_select").select2("enable", true); 
				}
			});
		});
	</script>
}