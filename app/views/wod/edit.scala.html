@(id: Long, postForm: Form[model.training.Workout])

@import helper._

@implicitFieldConstructor = @{ FieldConstructor(component.bootstrapInput.render) }

@styleExtra = {}

@scriptExtra = {
    <script src="@routes.Assets.at("javascripts/bootstrap-wysiwyg.js")" type="text/javascript" ></script>
	<script src="@routes.Assets.at("javascripts/jquery.hotkeys.js")" type="text/javascript" ></script>
}

@main("wod", styleExtra, scriptExtra) {

    <div class="row">
        <div class="col-md-10 col-md-push-1 col-sm-8 col-sm-push-2">
            <div class="portlet">
                <h2 class="portlet-title"><u>Edit a workout</u></h2>
                <div class="portlet-body">

                    @form(routes.WODController.update(id), 'name -> "postForm", 'onsubmit -> "loadVal();") {

                        @inputText(postForm("title"), '_label -> "Title", 'type -> "title", 'class -> "form-control")

                        @component.toolbar()
                        <div contenteditable="true" id="editor" >@Html(postForm("content").value)</div>
                        @textarea(postForm("content"), '_label -> null, 'id -> "content", 'type -> "content", 'placeholder -> "Compose your WOD...", 'style -> "display:none;")

                        <div class="actions">
                            <button type="submit" class="btn btn-primary">Update</button>
                            <a href="@routes.WODController.view(id)"> <button class="btn btn-default" type="button">Cancel</button></a>
                        </div>
                    }
                </div>
            </div>
        </div>
    </div>

	<script src="@routes.Assets.at("javascripts/init-editor.js")" type="text/javascript" ></script>
	
	<script type="text/javascript">
		function loadVal(){
			var desc = $("#editor").html();
			document.postForm.content.value = desc;
		}
	</script> 
}